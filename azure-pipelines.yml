
trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

variables:
  MAVEN_OPTS: "-Dmaven.compiler.source=17 -Dmaven.compiler.target=17"

steps:
- task: Cache@2
  inputs:
    key: 'maven | "$(Agent.OS)" | **/pom.xml'
    restoreKeys: |
      maven | "$(Agent.OS)"
    path: ~/.m2

- script: |
    sudo apt-get update
    sudo apt-get install -y google-chrome-stable
  displayName: 'Install Google Chrome'

- script: |
    google-chrome --version
  displayName: 'Show Chrome version'

- script: |
    mvn clean test
  displayName: 'Run Maven tests'
